(this["webpackJsonpcovid-stats"]=this["webpackJsonpcovid-stats"]||[]).push([[0],{69:function(e,t,n){e.exports=n(96)},74:function(e,t,n){},80:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(29),o=n.n(c),i=(n(74),n(5)),u=(n(80),n(81),n(12)),s=n.n(u),l=n(57),d=n.n(l),p=function(){var e=Object(i.c)((function(e){return e.progress}));return a.a.createElement("div",null,a.a.createElement("div",null,"loading covid: ",e.covid.done," / ",e.covid.total),a.a.createElement("div",null,"loading population: ",e.population.done," /"," ",e.population.total))},f=n(19),b=n.n(f),h=function(e){return e.ui.pickedCountries.map((function(t){return{name:t,data:e.data.where((function(e){return e.iso_code===t})).toArray().map((function(e){return[e.date.getTime(),1e6*e.total_cases/e.population]})),type:"line"}}))},m=function(){var e={title:{text:"Cases over time"},chart:{height:"50%",zoomType:"x"},xAxis:{type:"datetime",title:{text:"Date"},labels:{step:1}},yAxis:{type:"logarithmic",title:{text:"Cases per 1M population"}},series:Object(i.c)(h),credits:{enabled:!1}};return a.a.createElement("div",{id:"cases"},a.a.createElement("h2",null,"Cases over Time"),a.a.createElement(b.a,{highcharts:s.a,options:e}))},j=n(2),O=n(14),v=n(9),g=n(27),y=function(e){return Object(j.a)(Object(j.a)({},e),{},{type:"progress"})},E=Object(v.a)((function(e){return e.data}),(function(e){return e.ui.pickedCountries}),(function(e){return e.ui.searchText}),(function(e,t,n){return e.select((function(e){return{iso_code:e.iso_code,location:e.location}})).distinct((function(e){return e.iso_code})).orderBy((function(e){return e.location})).toPairs().map((function(e){var n=Object(O.a)(e,2),r=(n[0],n[1]);return Object(j.a)(Object(j.a)({},r),{},{active:Object(g.includes)(r.iso_code)(t)})})).filter((function(e){return e.active||""!==n&&e.location.toLowerCase().startsWith(n.toLowerCase())}))})),w=function(){var e=Object(i.b)(),t=Object(i.c)(E).map((function(t){var n=t.iso_code,r=t.location,c=t.active;return a.a.createElement("li",{key:n,onClick:function(t){return e({type:"country-toggled",countryCode:n})}},a.a.createElement("input",{type:"checkbox",checked:c}),r)})),n=Object(i.c)((function(e){return e.ui.searchText}));return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("h2",null,"Select Countries"),a.a.createElement("br",null),a.a.createElement("input",{type:"text",name:"search",placeholder:"Search Countries",onChange:function(t){return e({type:"country-search-changed",search:t.target.value})},value:n}),a.a.createElement("ul",{id:"countries",style:{listStyleType:"none",align:"left"}},t)))},x=n(59),_=n(60),C=n(42),k=function(e){return Object(x.a)(Object(C.b)(e)).pipe(Object(_.a)((function(e){return e.parseDates("date")})),Object(_.a)((function(e){return e.parseInts("total_cases")})),Object(_.a)((function(e){return e.parseInts("new_cases")})),Object(_.a)((function(e){return e.parseInts("total_deaths")})),Object(_.a)((function(e){return e.parseInts("new_deaths")})))},S=function(e){return Object(x.a)(Object(C.b)(e)).pipe(Object(_.a)((function(e){return e.parseInts(["Value","Year"])})),Object(_.a)((function(e){return e.renameSeries({Year:"year","Country Code":"iso_code",Value:"population"})})))},A=function(e,t){var n=function(e){return e.groupBy((function(e){return e.iso_code})).select((function(e){var t=e.summarize({year:C.a.max}).year,n=e.where((function(e){return e.year===t})).first().population;return{iso_code:e.first().iso_code,population:n}})).inflate()}(t);return e.join(n,(function(e){return e.iso_code}),(function(e){return e.iso_code}),(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{population:t?t.population:0})}))},T=function(e,t){e=Math.ceil(Math.abs(e));for(var n=[],r=0;r<t.length;r++){for(var a=Object(O.a)(t[r],1)[0],c=0,o=0,i=-1*e;i<=e;i++)void 0!==t[r+i]&&(o+=t[r+i][1],c+=1);n.push([a,o/c])}return n},I=function(e){return e.ui.pickedCountries.map((function(t){var n=e.data.where((function(e){return e.iso_code===t})).select((function(e){return{iso_code:e.iso_code,total_deaths:e.total_deaths,population:e.population,new_deaths:e.new_deaths}}));return{name:t,type:"line",data:T(2,n.toArray().map((function(e){return[e.total_deaths/e.population,e.new_deaths/e.population]})).sort((function(e,t){var n=Object(O.a)(e,2),r=n[0],a=(n[1],Object(O.a)(t,2)),c=a[0];a[1];return r<c?-1:1}))).filter((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return 0!==n&&0!==r}))}}))},L=function(){var e={title:{text:"Death Curve"},chart:{height:"50%",zoomType:"xy"},xAxis:{type:"logarithmic",title:{text:"Fraction of dead population"},min:1e-6,tickInterval:1,labels:{step:1,formatter:function(){return this.value.toExponential(0)}}},yAxis:{type:"logarithmic",title:{text:"Fraction of dead population per day (smoothed)"},min:1e-7,tickInterval:1,labels:{step:1,formatter:function(){return this.value.toExponential(0)}}},series:Object(i.c)(I),credits:{enabled:!1}};return a.a.createElement("div",{id:"deathcurve"},a.a.createElement("h2",null,"Robins Death Curve",a.a.createElement("span",{role:"img","aria-label":"tm"},"\u2122\ufe0f")),a.a.createElement(b.a,{highcharts:s.a,options:e}))},D=n(50),U=function(){var e=Object(i.c)((function(e){return e.ui.pickedCountries})),t=Object(i.c)((function(e){return e.data})),n=e.map((function(e){var n={name:e,type:"column",data:t.where((function(t){return t.iso_code===e&&t.date>new Date("03-01-2020")})).toArray().map((function(e){return[e.date.getTime(),e.new_cases]})).sort()},r={name:"7 day average",data:T(3,n.data),type:"line",enableMouseTracking:!1},c={chart:{height:"300",width:"300"},title:{text:e},xAxis:{type:"datetime",title:{text:"Date"}},yAxis:{title:{text:"daily new cases"}},legend:{enabled:!1},series:[n,r],credits:{enabled:!1}};return a.a.createElement(D.a,{center:!0,middle:!0},a.a.createElement(b.a,{highcharts:s.a,options:c}))}));return a.a.createElement("div",null,a.a.createElement("h2",null,"New Cases"),a.a.createElement(D.b,{columns:"repeat(auto-fit,minmax(300px,1fr))"},n))},z={textAlign:"center"},F=function(){return a.a.createElement("div",null,a.a.createElement(w,null),a.a.createElement("hr",null),a.a.createElement(U,null),a.a.createElement("hr",null),a.a.createElement(m,null),a.a.createElement("hr",null),a.a.createElement(L,null),a.a.createElement("div",{style:z},"data from"," ",a.a.createElement("a",{href:"https://covid.ourworldindata.org"},"Our World In Data")," and"," ",a.a.createElement("a",{href:"https://github.com/datasets/population"},"datahub.io via the World Bank")))},M=function(){var e=Object(i.c)((function(e){return e.message}));return a.a.createElement("div",null,"Error: ",e)};function N(e){throw new Error("Unexpected object: "+e)}d()(s.a);var R,G=function(){var e=Object(i.c)((function(e){return e}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"github-fork-ribbon right-top",href:"https://github.com/jupp0r/covid-stats","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub"},"Fork me on GitHub"),a.a.createElement("div",{className:"App"},function(e){switch(e.type){case"loading":return a.a.createElement(p,null);case"loaded":return a.a.createElement(F,null);case"error":return a.a.createElement(M,null);default:return N(e)}}(e)))},B=n(67),H=n(66),J=n(30),W=function(e,t){var n=new URL(e),r=new URLSearchParams(n.search);return r.set("countries[]",JSON.stringify(t)),n.search=r.toString(),n.toString()},P=function(e,t){return e},V=function(e,t){switch(t.type){case"fetch-success":var n=function(e){var t=new URL(e),n=new URLSearchParams(t.search).get("countries[]");if(!n)return ae;var r=JSON.parse(n);return Array.isArray(r)?r:(console.error("invalid url params"),ae)}(e.routing.url);return Object(j.a)(Object(j.a)({},e),{},{type:"loaded",data:t.response,ui:{pickedCountries:n,searchText:""},routing:{url:W(e.routing.url,n)}});case"progress":return Object(j.a)(Object(j.a)({},e),{},{progress:Object(j.a)(Object(j.a)({},e.progress),{},Object(J.a)({},t.target,Object(j.a)({done:t.done,total:e.progress[t.target].total},0!==t.total&&{total:t.total})))});default:return e}},Y=function(e,t){switch(t.type){case"country-toggled":var n=(r=t.countryCode,a=e.ui.pickedCountries,Object(g.includes)(r)(a)?Object(g.filter)((function(e){return e!==r}),a):[r].concat(Object(H.a)(a)));return Object(j.a)(Object(j.a)({},e),{},{ui:Object(j.a)(Object(j.a)({},e.ui),{},{pickedCountries:n}),routing:{url:W(e.routing.url,n)}});case"country-search-changed":return Object(j.a)(Object(j.a)({},e),{},{ui:Object(j.a)(Object(j.a)({},e.ui),{},{searchText:t.search})});default:return e}var r,a},q=n(102),X=n(3),K=n(97),Q=n(100),Z=n(99),$=n(64),ee=n(101),te=function(e){var t=new XMLHttpRequest;t.responseType="text";var n=new X.a((function(e){t.addEventListener("progress",(function(t){return e.next({done:t.loaded,total:t.total})}))})),r=new X.a((function(e){t.addEventListener("readystatechange",(function(n){4===t.readyState&&(200===t.status?(e.next(t.response),e.complete()):e.error(t.response))}))}));return t.open("GET",e),t.send(),{progress:n,result:r}},ne=Object(ee.a)((function(e){var t=e.pipe(Object(Z.a)((function(e){return"initialized"===e.type})),Object($.a)((function(){var e=te("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv"),t=e.progress,n=e.result,r=t.pipe(Object(_.a)((function(e){return y(Object(j.a)(Object(j.a)({},e),{},{target:"covid"}))}))),a=n.pipe(Object($.a)(k),Object(_.a)((function(e){return{type:"success",data:e}})));return Object(K.a)(r,a)}))),n=e.pipe(Object(Z.a)((function(e){return"initialized"===e.type})),Object($.a)((function(){var e=te("https://raw.githubusercontent.com/datasets/population/master/data/population.csv"),t=e.progress,n=e.result,r=t.pipe(Object(_.a)((function(e){return y(Object(j.a)(Object(j.a)({},e),{},{target:"population"}))}))),a=n.pipe(Object($.a)(S),Object(_.a)((function(e){return{type:"success",data:e}})));return Object(K.a)(r,a)}))),r=Object(K.a)(t,n).pipe(Object(Z.a)((function(e){return"progress"===e.type})),Object(_.a)((function(e){return e}))),a=function(e){return e.pipe(Object(Z.a)((function(e){return"success"===e.type})))},c=Object(Q.a)(a(t),a(n)).pipe(Object(_.a)((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return"success"===n.type&&"success"===r.type?{type:"fetch-success",response:A(n.data,r.data)}:{type:"error-during-fetch",message:"Error: ".concat(n," or ").concat(r," failed to fetch")}})));return Object(K.a)(r,c)})),re={type:"loading",progress:{covid:{done:0,total:2542856},population:{done:0,total:487991}},routing:{url:window.location.toString()}},ae=["USA","DEU","SWE","ITA","NGA"],ce=Object(q.a)(),oe=Object(B.a)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;if("url-updated"===t.type)return Object(j.a)(Object(j.a)({},e),{},{routing:Object(j.a)(Object(j.a)({},e.routing),{},{url:t.url})});switch(e.type){case"error":return P(e);case"loading":return V(e,t);case"loaded":return Y(e,t);default:return N(e)}},middleware:[ce]});ce.run(ne),R=oe,window.addEventListener("popstate",(function(){R.dispatch({type:"url-updated",url:window.location.toString()})})),R.subscribe((function(){var e=R.getState().routing.url;window.location.toString()!==e&&(window.history.pushState(null,"",e),document.body.scrollTop=0)})),oe.dispatch({type:"initialized"});var ie=document.getElementById("root");o.a.render(a.a.createElement(i.a,{store:oe},a.a.createElement(a.a.StrictMode,null,a.a.createElement(G,null))),ie)}},[[69,1,2]]]);
//# sourceMappingURL=main.f3ec151f.chunk.js.map