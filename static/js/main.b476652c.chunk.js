(this["webpackJsonpcovid-stats"]=this["webpackJsonpcovid-stats"]||[]).push([[0],{113:function(e,t,n){e.exports=n(141)},118:function(e,t,n){},123:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(118),n(13)),u=(n(123),n(124),function(){var e=Object(i.c)((function(e){return e.progress}));return r.a.createElement("div",null,r.a.createElement("div",null,"loading covid: ",e.covid.done," / ",e.covid.total),r.a.createElement("div",null,"loading population: ",e.population.done," /"," ",e.population.total))}),l=n(28),s=n.n(l),d=n(42),p=n.n(d),b=n(7),f=function(e){return Object(b.a)(Object(b.a)({},e),{},{type:"progress"})},h=n(189),m=n(187),g=n(173),j=n(4),O=Object(h.a)({paperPadding:{padding:"30px"}}),y=Object(j.a)(O)((function(e){return r.a.createElement(m.a,{m:3,p:3},r.a.createElement(g.a,Object.assign({},e,{className:e.classes.paperPadding}),e.children))})),v=n(191),E=n(175),w=function(e){return e.ui.pickedCountries.map((function(t){return{name:t,data:e.data.where((function(e){return e.iso_code===t})).toArray().map((function(e){return[e.date.getTime(),1e6*e.total_cases/e.population]})),type:"line"}}))},x=function(){var e=Object(i.c)(w),t=Object(i.c)((function(e){return e.ui.caseChart.logSetting})),n={chart:{height:"50%",zoomType:"x"},title:{text:""},xAxis:{type:"datetime",title:{text:"Date"},labels:{step:1}},yAxis:{type:t,title:{text:"Cases per 1M population"}},series:e,credits:{enabled:!1}},a=Object(i.b)();return r.a.createElement(y,{id:"cases",elevation:3},r.a.createElement("h2",null,"Cases over Time"),r.a.createElement(v.a,{value:t,onChange:function(e,t){t&&("linear"!==t&&"logarithmic"!==t||a(function(e){return{type:"case-chart-log-setting-changed",newSetting:e}}(t)))},exclusive:!0,"aria-label":"log axis setting"},r.a.createElement(E.a,{value:"logarithmic","aria-label":"logarithmic"},"log"),r.a.createElement(E.a,{value:"linear","aria-label":"linear"},"linear")),r.a.createElement(p.a,{highcharts:s.a,options:n}))},C=n(26),S=n(21),k=n(57),_=n(176),T=n(188),F=n(184),A=n(177),I=Object(S.a)((function(e){return e.data}),(function(e){return e.ui.pickedCountries}),(function(e){return e.ui.searchText}),(function(e,t,n){return e.select((function(e){return{iso_code:e.iso_code,location:e.location}})).distinct((function(e){return e.iso_code})).orderBy((function(e){return e.location})).toPairs().map((function(e){var n=Object(C.a)(e,2),a=(n[0],n[1]);return Object(b.a)(Object(b.a)({},a),{},{active:Object(k.includes)(a.iso_code)(t)})})).filter((function(e){return e.active||""!==n&&e.location.toLowerCase().startsWith(n.toLowerCase())}))})),M=function(){var e=Object(i.b)(),t={width:"180px"},n=Object(i.c)(I).map((function(n){var a=n.iso_code,o=n.location,c=n.active;return r.a.createElement(_.a,{button:!0,key:a,onClick:function(t){return e({type:"country-toggled",countryCode:a})},style:t},r.a.createElement(T.a,{edge:"start",checked:c,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}}),o)})),a=Object(i.c)((function(e){return e.ui.searchText}));return r.a.createElement(y,{elevation:3},r.a.createElement("label",null,r.a.createElement("br",null),r.a.createElement(F.a,{type:"text",name:"search",placeholder:"Search Countries",onChange:function(t){return e({type:"country-search-changed",search:t.target.value})},value:a}),r.a.createElement(A.a,{id:"countries",style:{display:"flex",padding:0,flexWrap:"wrap",alignItems:"center",justifyContent:"center"}},n)))},D=n(97),L=n(98),W=n(77),B=function(e){return Object(D.a)(Object(W.b)(e)).pipe(Object(L.a)((function(e){return e.parseDates("date")})),Object(L.a)((function(e){return e.parseInts("total_cases")})),Object(L.a)((function(e){return e.parseInts("new_cases")})),Object(L.a)((function(e){return e.parseInts("total_deaths")})),Object(L.a)((function(e){return e.parseInts("new_deaths")})))},V=function(e){return Object(D.a)(Object(W.b)(e)).pipe(Object(L.a)((function(e){return e.parseInts(["Value","Year"])})),Object(L.a)((function(e){return e.renameSeries({Year:"year","Country Code":"iso_code",Value:"population"})})))},z=function(e,t){var n=function(e){return e.groupBy((function(e){return e.iso_code})).select((function(e){var t=e.summarize({year:W.a.max}).year,n=e.where((function(e){return e.year===t})).first().population;return{iso_code:e.first().iso_code,population:n}})).inflate()}(t);return e.join(n,(function(e){return e.iso_code}),(function(e){return e.iso_code}),(function(e,t){return Object(b.a)(Object(b.a)({},e),{},{population:t?t.population:0})}))},R=function(e,t){e=Math.ceil(Math.abs(e));for(var n=[],a=0;a<t.length;a++){for(var r=Object(C.a)(t[a],1)[0],o=0,c=0,i=-1*e;i<=e;i++)void 0!==t[a+i]&&(c+=t[a+i][1],o+=1);n.push([r,c/o])}return n},U=function(e){return e.ui.pickedCountries.map((function(t){var n=e.data.where((function(e){return e.iso_code===t})).select((function(e){return{iso_code:e.iso_code,total_deaths:e.total_deaths,population:e.population,new_deaths:e.new_deaths}}));return{name:t,type:"line",data:R(2,n.toArray().map((function(e){return[e.total_deaths/e.population,e.new_deaths/e.population]})).sort((function(e,t){var n=Object(C.a)(e,2),a=n[0],r=(n[1],Object(C.a)(t,2)),o=r[0];r[1];return a<o?-1:1}))).filter((function(e){var t=Object(C.a)(e,2),n=t[0],a=t[1];return 0!==n&&0!==a}))}}))},H=function(){var e={title:{text:""},chart:{height:"50%",zoomType:"xy"},xAxis:{type:"logarithmic",title:{text:"Fraction of dead population"},min:1e-6,tickInterval:1,labels:{step:1,formatter:function(){return this.value.toExponential(0)}}},yAxis:{type:"logarithmic",title:{text:"Fraction of dead population per day (smoothed)"},min:1e-7,tickInterval:1,labels:{step:1,formatter:function(){return this.value.toExponential(0)}}},series:Object(i.c)(U),credits:{enabled:!1}};return r.a.createElement(y,{id:"deathcurve",elevation:3},r.a.createElement("h2",null,"Robins Death Curve",r.a.createElement("span",{role:"img","aria-label":"tm"},"\u2122\ufe0f")),r.a.createElement(p.a,{highcharts:s.a,options:e}))},N=n(178),P=function(){var e=Object(i.c)((function(e){return e.ui.pickedCountries})),t=Object(i.c)((function(e){return e.data})),n=e.map((function(e){var n={name:e,type:"column",data:t.where((function(t){return t.iso_code===e&&t.date>new Date("03-01-2020")})).toArray().map((function(e){return[e.date.getTime(),e.new_cases]})).sort()},a={name:"7 day average",data:R(3,n.data),type:"line",enableMouseTracking:!1},o={chart:{height:"200",width:"300"},title:{text:e},xAxis:{type:"datetime",tickInterval:6048e5},yAxis:{title:{text:"daily new cases"}},legend:{enabled:!1},series:[n,a],credits:{enabled:!1}};return r.a.createElement(N.a,{item:!0,key:e},r.a.createElement(p.a,{highcharts:s.a,options:o}))}));return r.a.createElement(y,{elevation:3,id:"new-cases"},r.a.createElement("h2",null,"New Cases"),r.a.createElement(N.a,{container:!0,justify:"center",spacing:5},n))},G={textAlign:"center"},J=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Covid Stats"),r.a.createElement(M,null),r.a.createElement(P,null),r.a.createElement(x,null),r.a.createElement(H,null),r.a.createElement("div",{style:G},"data from"," ",r.a.createElement("a",{href:"https://covid.ourworldindata.org"},"Our World In Data")," and"," ",r.a.createElement("a",{href:"https://github.com/datasets/population"},"datahub.io via the World Bank")))},Y=function(){var e=Object(i.c)((function(e){return e.message}));return r.a.createElement("div",null,"Error: ",e)};function q(e){throw new Error("Unexpected object: "+e)}s.a.setOptions({colors:["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],chart:{backgroundColor:"#FFFFFF",plotBackgroundColor:"rgba(255, 255, 255, .9)",plotShadow:!1,plotBorderWidth:0},title:{style:{color:"#000",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#666666",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineWidth:1,lineColor:"#000",tickColor:"#000",labels:{style:{color:"#000",font:"11px Trebuchet MS, Verdana, sans-serif"}},title:{style:{color:"#333",fontWeight:"bold",fontSize:"12px",fontFamily:"Trebuchet MS, Verdana, sans-serif"}}},yAxis:{minorTickInterval:"auto",lineColor:"#000",lineWidth:1,tickWidth:1,tickColor:"#000",labels:{style:{color:"#000",font:"11px Trebuchet MS, Verdana, sans-serif"}},title:{style:{color:"#333",fontWeight:"bold",fontSize:"12px",fontFamily:"Trebuchet MS, Verdana, sans-serif"}}},legend:{itemStyle:{font:"9pt Trebuchet MS, Verdana, sans-serif",color:"black"},itemHoverStyle:{color:"#039"},itemHiddenStyle:{color:"gray"}},navigation:{buttonOptions:{theme:{stroke:"#CCCCCC"}}}});var X,K=function(){var e=Object(i.c)((function(e){return e.type}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"github-fork-ribbon right-top",href:"https://github.com/jupp0r/covid-stats","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub"},"Fork me on GitHub"),r.a.createElement(m.a,{px:3,py:3,my:3,textAlign:"center"},function(e){switch(e){case"loading":return r.a.createElement(u,null);case"loaded":return r.a.createElement(J,null);case"error":return r.a.createElement(Y,null);default:return q(e)}}(e)))},Q=n(103),Z=n(102),$=n(59),ee=function(e,t){var n=new URL(e),a=new URLSearchParams(n.search);return a.set("countries[]",JSON.stringify(t)),n.search=a.toString(),n.toString()},te=function(e,t){return e},ne=function(e,t){switch(t.type){case"fetch-success":var n=function(e){var t=new URL(e),n=new URLSearchParams(t.search).get("countries[]");if(!n)return fe;var a=JSON.parse(n);return Array.isArray(a)?a:(console.error("invalid url params"),fe)}(e.routing.url);return Object(b.a)(Object(b.a)({},e),{},{type:"loaded",data:t.response,ui:{pickedCountries:n,searchText:"",caseChart:{logSetting:"logarithmic"}},routing:{url:ee(e.routing.url,n)}});case"progress":return Object(b.a)(Object(b.a)({},e),{},{progress:Object(b.a)(Object(b.a)({},e.progress),{},Object($.a)({},t.target,Object(b.a)({done:t.done,total:e.progress[t.target].total},0!==t.total&&{total:t.total})))});default:return e}},ae=function(e,t){switch(t.type){case"country-toggled":var n=(a=t.countryCode,r=e.ui.pickedCountries,Object(k.includes)(a)(r)?Object(k.filter)((function(e){return e!==a}),r):[a].concat(Object(Z.a)(r)));return Object(b.a)(Object(b.a)({},e),{},{ui:Object(b.a)(Object(b.a)({},e.ui),{},{pickedCountries:n}),routing:{url:ee(e.routing.url,n)}});case"country-search-changed":return Object(b.a)(Object(b.a)({},e),{},{ui:Object(b.a)(Object(b.a)({},e.ui),{},{searchText:t.search})});case"case-chart-log-setting-changed":return Object(b.a)(Object(b.a)({},e),{},{ui:Object(b.a)(Object(b.a)({},e.ui),{},{caseChart:Object(b.a)(Object(b.a)({},e.ui.caseChart),{},{logSetting:t.newSetting})})});default:return e}var a,r},re=n(185),oe=n(8),ce=n(144),ie=n(180),ue=n(179),le=n(99),se=n(181),de=function(e){var t=new XMLHttpRequest;t.responseType="text";var n=new oe.a((function(e){t.addEventListener("progress",(function(t){return e.next({done:t.loaded,total:t.total})}))})),a=new oe.a((function(e){t.addEventListener("readystatechange",(function(n){4===t.readyState&&(200===t.status?(e.next(t.response),e.complete()):e.error(t.response))}))}));return t.open("GET",e),t.send(),{progress:n,result:a}},pe=Object(se.a)((function(e){var t=e.pipe(Object(ue.a)((function(e){return"initialized"===e.type})),Object(le.a)((function(){var e=de("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv"),t=e.progress,n=e.result,a=t.pipe(Object(L.a)((function(e){return f(Object(b.a)(Object(b.a)({},e),{},{target:"covid"}))}))),r=n.pipe(Object(le.a)(B),Object(L.a)((function(e){return{type:"success",data:e}})));return Object(ce.a)(a,r)}))),n=e.pipe(Object(ue.a)((function(e){return"initialized"===e.type})),Object(le.a)((function(){var e=de("https://raw.githubusercontent.com/datasets/population/master/data/population.csv"),t=e.progress,n=e.result,a=t.pipe(Object(L.a)((function(e){return f(Object(b.a)(Object(b.a)({},e),{},{target:"population"}))}))),r=n.pipe(Object(le.a)(V),Object(L.a)((function(e){return{type:"success",data:e}})));return Object(ce.a)(a,r)}))),a=Object(ce.a)(t,n).pipe(Object(ue.a)((function(e){return"progress"===e.type})),Object(L.a)((function(e){return e}))),r=function(e){return e.pipe(Object(ue.a)((function(e){return"success"===e.type})))},o=Object(ie.a)(r(t),r(n)).pipe(Object(L.a)((function(e){var t=Object(C.a)(e,2),n=t[0],a=t[1];return"success"===n.type&&"success"===a.type?{type:"fetch-success",response:z(n.data,a.data)}:{type:"error-during-fetch",message:"Error: ".concat(n," or ").concat(a," failed to fetch")}})));return Object(ce.a)(a,o)})),be={type:"loading",progress:{covid:{done:0,total:2542856},population:{done:0,total:487991}},routing:{url:window.location.toString()}},fe=["USA","DEU","SWE","ITA","NGA"],he=Object(re.a)(),me=Object(Q.a)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;if("url-updated"===t.type)return Object(b.a)(Object(b.a)({},e),{},{routing:Object(b.a)(Object(b.a)({},e.routing),{},{url:t.url})});switch(e.type){case"error":return te(e);case"loading":return ne(e,t);case"loaded":return ae(e,t);default:return q(e)}},middleware:[he]});he.run(pe),X=me,window.addEventListener("popstate",(function(){X.dispatch({type:"url-updated",url:window.location.toString()})})),X.subscribe((function(){var e=X.getState().routing.url;window.location.toString()!==e&&(window.history.pushState(null,"",e),document.body.scrollTop=0)})),me.dispatch({type:"initialized"});var ge=n(100),je=n(182),Oe=n(183),ye=(n(140),document.getElementById("root")),ve=Object(ge.a)({palette:{type:"light"}});c.a.render(r.a.createElement(i.a,{store:me},r.a.createElement(r.a.StrictMode,null,r.a.createElement(je.a,{theme:ve},r.a.createElement(Oe.a,null),r.a.createElement(K,null)))),ye)}},[[113,1,2]]]);
//# sourceMappingURL=main.b476652c.chunk.js.map