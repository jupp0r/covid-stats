(this["webpackJsonpcovid-stats"]=this["webpackJsonpcovid-stats"]||[]).push([[0],{60:function(e,t,n){e.exports=n(87)},65:function(e,t,n){},71:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),o=n.n(c),u=(n(65),n(6)),i=(n(71),function(){var e=Object(u.c)((function(e){return e.progress}));return a.a.createElement("div",null,a.a.createElement("div",null,"loading covid: ",e.covid.done," / ",e.covid.total),a.a.createElement("div",null,"loading population: ",e.population.done," /"," ",e.population.total))}),s=n(41),l=n.n(s),p=n(51),d=n.n(p),f=function(e){return e.ui.pickedCountries.map((function(t){return{name:t,data:e.data.where((function(e){return e.iso_code===t})).toArray().map((function(e){return[e.date.getTime(),e.total_cases]})),type:"line"}}))},b=function(){var e=Object(u.c)(f),t={title:{text:"Cases over time"},xAxis:{type:"datetime",title:{text:"Date"}},yAxis:{type:"logarithmic"},series:e};return console.log(e),a.a.createElement("div",null,a.a.createElement(d.a,{highcharts:l.a,options:t}))},j=n(3),O=n(35),v=n(21),y=function(e){return Object(j.a)(Object(j.a)({},e),{},{type:"progress"})},g=function(e){return e.data.select((function(e){return{iso_code:e.iso_code,location:e.location}})).distinct((function(e){return e.iso_code})).orderBy((function(e){return e.location})).toPairs().map((function(t){var n=Object(O.a)(t,2),r=(n[0],n[1]);return Object(j.a)(Object(j.a)({},r),{},{active:Object(v.includes)(r.iso_code)(e.ui.pickedCountries)})})).filter((function(t){return t.active||""!==e.ui.searchText&&t.location.toLowerCase().startsWith(e.ui.searchText.toLowerCase())}))},m=function(){var e=Object(u.b)(),t=Object(u.c)(g).map((function(t){var n,r=t.iso_code,c=t.location,o=t.active;return a.a.createElement("li",{key:r,style:(n=o,{fontWeight:n?"bold":"normal"}),onClick:function(t){return e({type:"country-toggled",countryCode:r})}},c)})),n=Object(u.c)((function(e){return e.ui.searchText}));return a.a.createElement("div",null,a.a.createElement("label",null,"Country Picker",a.a.createElement("input",{type:"text",name:"search",onChange:function(t){return e({type:"country-search-changed",search:t.target.value})},value:n}),a.a.createElement("ul",{id:"countries"},t)))},h=function(){return a.a.createElement("div",null,a.a.createElement(m,null),a.a.createElement(b,null))},E=function(){var e=Object(u.c)((function(e){return e.message}));return a.a.createElement("div",null,"Error: ",e)};function w(e){throw new Error("Unexpected object: "+e)}var x=function(){var e=Object(u.c)((function(e){return e}));return a.a.createElement("div",{className:"App"},function(e){switch(e.type){case"loading":return a.a.createElement(i,null);case"loaded":return a.a.createElement(h,null);case"error":return a.a.createElement(E,null);default:return w(e)}}(e))},C=n(57),_=n(58),k=n(24),T=n(53),A=n(54),L=n(37),z=function(e){return Object(T.a)(Object(L.b)(e)).pipe(Object(A.a)((function(e){return e.parseDates("date")})),Object(A.a)((function(e){return e.parseInts("total_cases")})))},S=function(e){return Object(T.a)(Object(L.b)(e)).pipe(Object(A.a)((function(e){return e.parseInts(["Value","Year"])})),Object(A.a)((function(e){return e.renameSeries({Year:"year","Country Code":"iso_code",Value:"population"})})))},B=function(e,t){var n=function(e){return e.groupBy((function(e){return e.iso_code})).select((function(e){var t=e.summarize({year:L.a.max}).year,n=e.where((function(e){return e.year===t})).first().population;return{iso_code:e.first().iso_code,population:n}})).inflate()}(t);return console.log(e.toArray()),e.join(n,(function(e){return e.iso_code}),(function(e){return e.iso_code}),(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{population:t?t.population:0})}))},I=function(e,t){return e},D=function(e,t){switch(t.type){case"fetch-success":return{type:"loaded",data:t.response,ui:{pickedCountries:["USA"],searchText:""}};case"progress":return Object(j.a)(Object(j.a)({},e),{},{progress:Object(j.a)(Object(j.a)({},e.progress),{},Object(k.a)({},t.target,Object(j.a)({done:t.done,total:e.progress[t.target].total},0!==t.total&&{total:t.total})))});default:return e}},J=function(e,t){switch(t.type){case"country-toggled":return Object(j.a)(Object(j.a)({},e),{},{ui:Object(j.a)(Object(j.a)({},e.ui),{},{pickedCountries:(n=t.countryCode,r=e.ui.pickedCountries,Object(v.includes)(n)(r)?Object(v.filter)((function(e){return e!==n}),r):[n].concat(Object(_.a)(r)))})});case"country-search-changed":return Object(j.a)(Object(j.a)({},e),{},{ui:Object(j.a)(Object(j.a)({},e.ui),{},{searchText:t.search})});default:return e}var n,r},M=n(93),P=n(2),U=n(88),V=n(91),W=n(90),Y=n(55),q=n(92),G=function(e){var t=new XMLHttpRequest;t.responseType="text";var n=new P.a((function(e){t.addEventListener("progress",(function(t){return e.next({done:t.loaded,total:t.total})}))})),r=new P.a((function(e){t.addEventListener("readystatechange",(function(n){4===t.readyState&&(200===t.status?(e.next(t.response),e.complete()):e.error(t.response))}))}));return t.open("GET",e),t.send(),{progress:n,result:r}},H=Object(q.a)((function(e){var t=e.pipe(Object(W.a)((function(e){return"initialized"===e.type})),Object(Y.a)((function(){var e=G("https://covid.ourworldindata.org/data/owid-covid-data.csv"),t=e.progress,n=e.result,r=t.pipe(Object(A.a)((function(e){return y(Object(j.a)(Object(j.a)({},e),{},{target:"covid"}))}))),a=n.pipe(Object(Y.a)(z),Object(A.a)((function(e){return{type:"success",data:e}})));return Object(U.a)(r,a)}))),n=e.pipe(Object(W.a)((function(e){return"initialized"===e.type})),Object(Y.a)((function(){var e=G("https://raw.githubusercontent.com/datasets/population/master/data/population.csv"),t=e.progress,n=e.result,r=t.pipe(Object(A.a)((function(e){return y(Object(j.a)(Object(j.a)({},e),{},{target:"population"}))}))),a=n.pipe(Object(Y.a)(S),Object(A.a)((function(e){return{type:"success",data:e}})));return Object(U.a)(r,a)}))),r=Object(U.a)(t,n).pipe(Object(W.a)((function(e){return"progress"===e.type})),Object(A.a)((function(e){return e}))),a=function(e){return e.pipe(Object(W.a)((function(e){return"success"===e.type})))},c=Object(V.a)(a(t),a(n)).pipe(Object(A.a)((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return console.log("happened"),"success"===n.type&&"success"===r.type?{type:"fetch-success",response:B(n.data,r.data)}:{type:"error-during-fetch",message:"Error: ".concat(n," or ").concat(r," failed to fetch")}})));return Object(U.a)(r,c)})),N={type:"loading",progress:{covid:{done:0,total:2542856},population:{done:0,total:487991}}},R=Object(M.a)(),X=Object(C.a)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(e.type){case"error":return I(e);case"loading":return D(e,t);case"loaded":return J(e,t);default:return w(e)}},middleware:[R]});R.run(H),X.dispatch({type:"initialized"});var F=document.getElementById("root");o.a.render(a.a.createElement(u.a,{store:X},a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null))),F)}},[[60,1,2]]]);
//# sourceMappingURL=main.703e64ac.chunk.js.map